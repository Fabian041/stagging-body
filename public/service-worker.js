self.addEventListener('install', function(event) {
  event.waitUntil(
    caches.open('my-cache').then(function(cache) {
      return cache.addAll([
        '/',
        '/css/app.css',
        '/js/app.js',
        // Include other static assets here
        // Use the versioned asset paths generated by Laravel Mix
        '/dist/assets/css/components.css',
        '/dist/assets/sounds/unknown-ll.mp3',
        '/dist/assets/sounds/finish-pulling.mp3',
        '/dist/assets/sounds/scan-customer-first.mp3',
        '/dist/assets/sounds/already-scan-ll.mp3',
        '/dist/assets/sounds/already-scan.mp3',
        '/dist/assets/sounds/already-pulled.mp3',
        '/dist/assets/sounds/fullfilled.mp3',
        '/dist/assets/sounds/notMatch-ll.mp3',
        '/dist/assets/sounds/notMatch.mp3',
        '/dist/assets/sounds/notExist.mp3',
        '/dist/assets/sounds/uncomplete-ll.mp3',
        '/dist/assets/sounds/unknown.mp3',
        '/dist/assets/css/components.css.map',
        '/dist/assets/css/style.css',
        '/dist/assets/modules/bootstrap/css/bootstrap.min.css',
        '/dist/assets/modules/fontawesome/css/all.min.css',
        '/dist/assets/modules/izitoast/css/iziToast.min.css',
        '/dist/assets/modules/bootstrap-social/bootstrap-social.css',
        '/dist/assets/modules/izitoast/js/iziToast.min.js',
        '/dist/assets/modules/jquery.min.js',
        '/dist/assets/modules/popper.js',
        '/dist/assets/modules/tooltip.js',
        '/dist/assets/modules/bootstrap/js/bootstrap.min.js',
        '/dist/assets/modules/nicescroll/jquery.nicescroll.min.js',
        '/dist/assets/modules/moment.min.js',
        '/dist/assets/modules/jquery.sparkline.min.js',
        '/dist/assets/modules/chart.min.js',
        '/dist/assets/modules/owlcarousel2/dist/owl.carousel.min.js',
        '/dist/assets/modules/summernote/summernote-bs4.js',
        '/dist/assets/modules/chocolat/dist/js/jquery.chocolat.min.js',
        '/dist/assets/modules/jqvmap/dist/jqvmap.min.css',
        '/dist/assets/modules/summernote/summernote-bs4.css',
        '/dist/assets/modules/owlcarousel2/dist/assets/owl.carousel.min.css',
        '/dist/assets/modules/owlcarousel2/dist/assets/owl.theme.default.min.css',
        '/dist/assets/js/stisla.js',
        '/dist/assets/js/scripts.js',
        '/dist/assets/js/custom.js',
        '/dist/assets/js/page/index.js',
      ]);
    }),

    self.skipWaiting()
  );
});

// Define the manifest object
const manifest = {
  name: 'Bella',
  short_name: 'Bella',
  start_url: '/',
  display: 'standalone',
  icons: [
    {
      src: '/icons/logo.png',
      sizes: '128x128',
      type: 'image/png'
    }
  ],
};

// Fetch event
self.addEventListener('fetch', function(event) {
  if (event.request.url.endsWith('manifest.json')) {
    event.respondWith(
      new Response(JSON.stringify(manifest), {
        headers: { 'Content-Type': 'application/json' }
      })
    );
  } else {
    event.respondWith(
      caches.match(event.request)
        .then(function(response) {
          return response || fetch(event.request);
        })
    );
  }
});
